<Window x:Class="BusBuddy.WPF.Views.Student.AdvancedSearchDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
        xmlns:viewModels="clr-namespace:BusBuddy.WPF.ViewModels.Student"
        xmlns:converters="clr-namespace:BusBuddy.WPF.Converters"
        mc:I gnorable="d"
        T itle="Advanced Student Search"
        H eight="500"
        W idth="600"
        WindowStartupLocation="CenterOwner"
        R esizeMode="NoResize"
        S howInTaskbar="False" d:D ataContext="{d:DesignInstance T ype=viewModels:AdvancedSearchViewModel}">

    <Window.Resources>
        <!-- Local styles maintained for dialog-specific styling -->
        <Style x:K ey="HeaderStyle" T argetType="TextBlock">
            <Setter P roperty="FontWeight" V alue="Bold"/>
            <Setter P roperty=" Margin" V alue="0,10,0,5"/>
        </Style>
        <Style x:K ey="FieldLabel" T argetType="TextBlock">
            <Setter P roperty="VerticalAlignment" V alue="Center"/>
            <Setter P roperty=" Margin" V alue="0,0,10,0"/>
        </Style>
        <Style x:K ey="FieldGroup" T argetType="StackPanel">
            <Setter P roperty=" Margin" V alue="0,5"/>
        </Style>
        <!-- EnumToBooleanConverter is now global in App.xaml -->
    </Window.Resources>

    <Grid M argin="20">
        <Grid.RowDefinitions>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="*"/>
            <RowDefinition H eight="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.R ow="0"
                   T ext="Advanced Student Search"
                   F ontSize="18"
                   F ontWeight="Bold"
                   M argin="0,0,0,15"/>

        <!-- Search Form -->
        <ScrollViewer Grid.R ow="1" V erticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Basic Information -->
                <TextBlock T ext="Basic Information" S tyle="{StaticResource HeaderStyle}"/>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Student Name" S tyle="{StaticResource FieldLabel}"/>
                    <TextBox T ext="{Binding StudentName, U pdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Student Number" S tyle="{StaticResource FieldLabel}"/>
                    <TextBox T ext="{Binding StudentNumber, U pdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition W idth="*"/>
                        <ColumnDefinition W idth="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.C olumn="0" S tyle="{StaticResource FieldGroup}" M argin="0,5,5,5">
                        <TextBlock T ext="Grade" S tyle="{StaticResource FieldLabel}"/>
                        <ComboBox I temsSource="{Binding AllGrades}"
                                  S electedValue="{Binding Grade}"
                                  D isplayMemberPath="."
                                  S electedValuePath="."
                                  I sEditable="True"/>
                    </StackPanel>

                    <StackPanel Grid.C olumn="1" S tyle="{StaticResource FieldGroup}" M argin="5,5,0,5">
                        <TextBlock T ext="School" S tyle="{StaticResource FieldLabel}"/>
                        <ComboBox I temsSource="{Binding AllSchools}"
                                  S electedValue="{Binding School}"
                                  D isplayMemberPath="."
                                  S electedValuePath="."
                                  I sEditable="True"/>
                    </StackPanel>
                </Grid>

                <!-- Status -->
                <TextBlock T ext="Status" S tyle="{StaticResource HeaderStyle}"/>

                <StackPanel O rientation="Horizontal" S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Active Status:" S tyle="{StaticResource FieldLabel}"/>
                    <RadioButton C ontent="All"
                                 I sChecked="{Binding ActiveStatus, C onverterParameter=All, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="Active Only"
                                 I sChecked="{Binding ActiveStatus, C onverterParameter=Active, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="Inactive Only"
                                 I sChecked="{Binding ActiveStatus, C onverterParameter=Inactive, C onverter={StaticResource EnumToBooleanConverter}}"/>
                </StackPanel>

                <StackPanel O rientation="Horizontal" S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Special Needs:" S tyle="{StaticResource FieldLabel}"/>
                    <RadioButton C ontent="All"
                                 I sChecked="{Binding SpecialNeedsStatus, C onverterParameter=All, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="Yes"
                                 I sChecked="{Binding SpecialNeedsStatus, C onverterParameter=Yes, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="No"
                                 I sChecked="{Binding SpecialNeedsStatus, C onverterParameter=No, C onverter={StaticResource EnumToBooleanConverter}}"/>
                </StackPanel>

                <!-- Transportation -->
                <TextBlock T ext="Transportation" S tyle="{StaticResource HeaderStyle}"/>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="AM Route" S tyle="{StaticResource FieldLabel}"/>
                    <ComboBox I temsSource="{Binding AllRoutes}"
                              S electedValue="{Binding AMRoute}"
                              D isplayMemberPath="RouteName"
                              S electedValuePath="RouteName"/>
                </StackPanel>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="PM Route" S tyle="{StaticResource FieldLabel}"/>
                    <ComboBox I temsSource="{Binding AllRoutes}"
                              S electedValue="{Binding PMRoute}"
                              D isplayMemberPath="RouteName"
                              S electedValuePath="RouteName"/>
                </StackPanel>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Bus Stop" S tyle="{StaticResource FieldLabel}"/>
                    <TextBox T ext="{Binding BusStop, U pdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <StackPanel O rientation="Horizontal" S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Route Assignment:" S tyle="{StaticResource FieldLabel}"/>
                    <RadioButton C ontent="All"
                                 I sChecked="{Binding RouteAssignmentStatus, C onverterParameter=All, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="With Route"
                                 I sChecked="{Binding RouteAssignmentStatus, C onverterParameter=WithRoute, C onverter={StaticResource EnumToBooleanConverter}}"
                                 M argin="0,0,10,0"/>
                    <RadioButton C ontent="Without Route"
                                 I sChecked="{Binding RouteAssignmentStatus, C onverterParameter=WithoutRoute, C onverter={StaticResource EnumToBooleanConverter}}"/>
                </StackPanel>

                <!-- Location -->
                <TextBlock T ext="Location" S tyle="{StaticResource HeaderStyle}"/>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="City" S tyle="{StaticResource FieldLabel}"/>
                    <TextBox T ext="{Binding City, U pdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <StackPanel S tyle="{StaticResource FieldGroup}">
                    <TextBlock T ext="Zip Code" S tyle="{StaticResource FieldLabel}"/>
                    <TextBox T ext="{Binding Zip, U pdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.R ow="2"
                    O rientation="Horizontal"
                    H orizontalAlignment="Right"
                    M argin="0,20,0,0">
            <syncfusion:ButtonAdv L abel="Search"
                    C ommand="{Binding SearchCommand}"
                    W idth="100"
                    P adding="0,5"
                    M argin="0,0,10,0"
                    I sDefault="True"
                    S tyle="{StaticResource BusBuddyButtonAdvStyle}"/>

            <syncfusion:ButtonAdv L abel="Clear All"
                    C ommand="{Binding ClearCommand}"
                    W idth="100"
                    P adding="0,5"
                    M argin="0,0,10,0"
                    S tyle="{StaticResource BusBuddyButtonAdvStyle}"/>

            <syncfusion:ButtonAdv L abel="Cancel"
                    C ommand="{Binding CancelCommand}"
                    W idth="100"
                    P adding="0,5"
                    I sCancel="True"
                    S tyle="{StaticResource BusBuddyButtonAdvStyle}"/>
        </StackPanel>
    </Grid>
</Window>



