<Window x:Class="BusBuddy.WPF.Views.Schedule.ScheduleDetailsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
        xmlns:local="clr-namespace:BusBuddy.WPF.Views.Schedule"
        xmlns:converters="clr-namespace:BusBuddy.WPF.Converters"
        T itle="Schedule Details"
        W idth="800" H eight="600"
        WindowStartupLocation="CenterOwner"
        S howInTaskbar="False"
        R esizeMode="CanResize" Background="{DynamicResource ProfessionalSurfaceMedium}">

    <Window.Resources>
        <!-- Professional FluentDark Theme Styles for Schedule Details -->
        <Style x:K ey="DetailTextBlockStyle" T argetType="TextBlock">
            <Setter P roperty=" FontSize" V alue="14"/>
            <Setter P roperty=" Margin" V alue="0,2"/>
            <Setter P roperty=" Foreground" V alue="{DynamicResource ProfessionalTextPrimary}"/>
            <Setter P roperty="VerticalAlignment" V alue="Center"/>
        </Style>

        <Style x:K ey=" LabelTextBlockStyle" T argetType="TextBlock">
            <Setter P roperty=" FontSize" V alue="12"/>
            <Setter P roperty="FontWeight" V alue="SemiBold"/>
            <Setter P roperty=" Margin" V alue="0,4,0,2"/>
            <Setter P roperty=" Foreground" V alue="{DynamicResource ProfessionalTextSecondary}"/>
            <Setter P roperty="VerticalAlignment" V alue="Center"/>
        </Style>

        <Style x:K ey="SectionHeaderStyle" T argetType="TextBlock">
            <Setter P roperty=" FontSize" V alue="16"/>
            <Setter P roperty="FontWeight" V alue="Bold"/>
            <Setter P roperty=" Margin" V alue="0,16,0,8"/>
            <Setter P roperty=" Foreground" V alue="{DynamicResource BrandPrimaryBrush}"/>
        </Style>

        <Style x:K ey="StatusBorderStyle" T argetType="Border">
            <Setter P roperty="CornerRadius" V alue="12"/>
            <Setter P roperty=" Padding" V alue="12,6"/>
            <Setter P roperty="HorizontalAlignment" V alue="Left"/>
            <Setter P roperty="VerticalAlignment" V alue="Center"/>
        </Style>

        <Style x:K ey="InfoSectionStyle" T argetType="Border">
            <Setter P roperty=" Background" V alue="{DynamicResource ProfessionalSurfaceLight}"/>
            <Setter P roperty=" BorderBrush" V alue="{DynamicResource SurfaceBorderBrush}"/>
            <Setter P roperty="BorderThickness" V alue="1"/>
            <Setter P roperty="CornerRadius" V alue="8"/>
            <Setter P roperty=" Padding" V alue="16"/>
            <Setter P roperty=" Margin" V alue="0,0,0,16"/>
        </Style>
    </Window.Resources>

    <Grid M argin="0" B ackground="{DynamicResource ProfessionalSurfaceMedium}">
        <Grid.RowDefinitions>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="*"/>
            <RowDefinition H eight="Auto"/>
        </Grid.RowDefinitions>

        <!-- Professional Header with BusBuddy Theme -->
        <Border Grid.R ow="0"
                B ackground="{DynamicResource BrandPrimaryBrush}"
                P adding="20,16"
                M argin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition W idth="*"/>
                    <ColumnDefinition W idth="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.C olumn="0" O rientation="Horizontal">
                    <!-- Professional Schedule Icon -->
                    <Border B ackground="{DynamicResource BrandSchoolBusYellowBrush}"
                            W idth="40" H eight="40"
                            C ornerRadius="8"
                            M argin="0,0,16,0">
                        <TextBlock T ext="ðŸ“…"
                                  F ontSize="20"
                                  H orizontalAlignment="Center"
                                  V erticalAlignment="Center"/>
                    </Border>

                    <StackPanel V erticalAlignment="Center">
                        <TextBlock T ext="{Binding Schedule.Route.RouteName, S tringFormat='Schedule Details: {0}', F allbackValue='Schedule Details: Unknown Route'}"
                                   F ontSize="20" F ontWeight="Bold"
                                   F oreground="{DynamicResource ProfessionalTextPrimary}"
                                   M argin="0,0,0,4"/>
                        <TextBlock T ext="{Binding Schedule.ScheduleDate, S tringFormat='Date: {0:MMM dd, yyyy}', F allbackValue='Date: Unknown'}"
                                   F ontSize="14"
                                   F oreground="{DynamicResource ProfessionalTextSecondary}"/>
                    </StackPanel>
                </StackPanel>

                <Border Grid.C olumn="1"
                        S tyle="{StaticResource StatusBorderStyle}"
                        B ackground="{Binding Schedule.Status, C onverter={StaticResource StatusToColorConverter}}">
                    <TextBlock T ext="{Binding Schedule.Status, F allbackValue='Unknown'}"
                               F ontWeight="SemiBold"
                               F ontSize="12"
                               F oreground="{DynamicResource ProfessionalTextPrimary}"/>
                </Border>
            </Grid>
        </Border>

        <!-- Professional Content Layout -->
        <ScrollViewer Grid.R ow="1"
                      V erticalScrollBarVisibility="Auto"
                      H orizontalScrollBarVisibility="Disabled"
                      M argin="20,0,20,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition W idth="*"/>
                    <ColumnDefinition W idth="20"/>
                    <ColumnDefinition W idth="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column â€” Basic Information -->
                <StackPanel Grid.C olumn="0">
                    <!-- Basic Information Section -->
                    <TextBlock T ext="Basic Information" S tyle="{StaticResource SectionHeaderStyle}"/>
                    <Border S tyle="{StaticResource InfoSectionStyle}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition W idth="120"/>
                                <ColumnDefinition W idth="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.R ow="0" Grid.C olumn="0" T ext="Schedule ID:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="0" Grid.C olumn="1" T ext="{Binding Schedule.ScheduleId}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="1" Grid.C olumn="0" T ext="Route:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="1" Grid.C olumn="1" T ext="{Binding Schedule.Route.RouteName}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="2" Grid.C olumn="0" T ext="Bus Number:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="2" Grid.C olumn="1" T ext="{Binding Schedule.Bus.BusNumber}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="3" Grid.C olumn="0" T ext="Driver:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="3" Grid.C olumn="1" T ext="{Binding Schedule.Driver.DriverName}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="4" Grid.C olumn="0" T ext="Status:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <Border Grid.R ow="4" Grid.C olumn="1"
                                    B ackground="{Binding Schedule.Status, C onverter={StaticResource StatusToColorConverter}}"
                                    C ornerRadius="4" P adding="8,4" H orizontalAlignment="Left">
                                <TextBlock T ext="{Binding Schedule.Status}"
                                           F ontSize="12" F ontWeight="SemiBold"
                                           F oreground="{DynamicResource ProfessionalTextPrimary}"/>
                            </Border>

                            <TextBlock Grid.R ow="5" Grid.C olumn="0" T ext="Created:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="5" Grid.C olumn="1" T ext="{Binding Schedule.CreatedDate, S tringFormat='{}{0:MMM dd, yyyy}'}" S tyle="{StaticResource DetailTextBlockStyle}"/>
                        </Grid>
                    </Border>

                    <!-- Timing Information Section -->
                    <TextBlock T ext="Timing Information" S tyle="{StaticResource SectionHeaderStyle}"/>
                    <Border S tyle="{StaticResource InfoSectionStyle}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition W idth="120"/>
                                <ColumnDefinition W idth="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                                <RowDefinition H eight="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.R ow="0" Grid.C olumn="0" T ext="Departure:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="0" Grid.C olumn="1" T ext="{Binding Schedule.DepartureTime, S tringFormat='{}{0:HH:mm}'}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="1" Grid.C olumn="0" T ext="Arrival:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="1" Grid.C olumn="1" T ext="{Binding Schedule.ArrivalTime, S tringFormat='{}{0:HH:mm}'}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="2" Grid.C olumn="0" T ext="Schedule Date:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="2" Grid.C olumn="1" T ext="{Binding Schedule.ScheduleDate, S tringFormat='{}{0:MMM dd, yyyy}'}" S tyle="{StaticResource DetailTextBlockStyle}"/>

                            <TextBlock Grid.R ow="3" Grid.C olumn="0" T ext="Updated:" S tyle="{StaticResource LabelTextBlockStyle}"/>
                            <TextBlock Grid.R ow="3" Grid.C olumn="1" T ext="{Binding Schedule.UpdatedDate, S tringFormat='{}{0:MMM dd, yyyy HH:mm}'}" S tyle="{StaticResource DetailTextBlockStyle}"/>
                        </Grid>
                    </Border>
                </StackPanel>

                <!-- Right Column â€” Notes and Additional Information -->
                <StackPanel Grid.C olumn="2">
                    <!-- Notes Section -->
                    <TextBlock T ext="Notes" S tyle="{StaticResource SectionHeaderStyle}"/>
                    <Border S tyle="{StaticResource InfoSectionStyle}">
                        <syncfusion:SfTextBoxExt T ext="{Binding Schedule.Notes, M ode=OneWay, F allbackValue='No notes available'}"
                                                 M inHeight="100"
                                                 T extWrapping="Wrap"
                                                 A cceptsReturn="True"
                                                 V erticalScrollBarVisibility="Auto"
                                                 I sReadOnly="True" Background="{DynamicResource ProfessionalSurfaceMedium}"
                                                 F oreground="{DynamicResource ProfessionalTextPrimary}"/>
                    </Border>

                    <!-- Recent Activities Section -->
                    <TextBlock T ext="Recent Activities" S tyle="{StaticResource SectionHeaderStyle}"/>
                    <Border S tyle="{StaticResource InfoSectionStyle}">
                        <syncfusion:SfDataGrid I temsSource="{Binding RecentActivities}"
                                               M axHeight="200"
                                               A utoGenerateColumns="False"
                                               I sReadOnly="True" Background="Transparent"
                                               S tyle="{StaticResource BusBuddySfDataGridStyle}">
                            <syncfusion:SfDataGrid.Columns>
                                <syncfusion:GridTextColumn M appingName="Date"
                                                           H eaderText="Date"
                                                           W idth="80"/>
                                <syncfusion:GridTextColumn M appingName="ActivityType"
                                                           H eaderText="Type"
                                                           W idth="100"/>
                                <syncfusion:GridTextColumn M appingName="Description"
                                                           H eaderText="Description"
                                                           W idth="*"/>
                            </syncfusion:SfDataGrid.Columns>
                        </syncfusion:SfDataGrid>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Professional Action Buttons -->
                        <Border Grid.R ow="2"
                                B ackground="{DynamicResource ProfessionalSurfaceLight}"
                                B orderBrush="{DynamicResource SurfaceBorderBrush}"
                                B orderThickness="0,1,0,0"
                                P adding="20,16">
            <StackPanel O rientation="Horizontal" H orizontalAlignment="Right">
                <syncfusion:ButtonAdv C ontent="Edit Schedule"
                                      C ommand="{Binding EditScheduleCommand}"
                                      S tyle="{StaticResource BusBuddyPrimaryButtonAdvStyle}" SmallIcon="Edit16.png"
                                      S izeMode="Normal"
                                      M argin="0,0,12,0"
                                      P adding="16,10"/>
                <syncfusion:ButtonAdv C ontent="Generate PDF Report"
                                      C ommand="{Binding GenerateReportCommand}"
                                      S tyle="{StaticResource BusBuddySchoolBusButtonAdvStyle}" SmallIcon="Report16.png"
                                      S izeMode="Normal"
                                      M argin="0,0,12,0"
                                      P adding="16,10"/>
                <syncfusion:ButtonAdv C ontent="Close"
                                      C lick="CloseButton_Click"
                                      S tyle="{StaticResource BusBuddyButtonAdvStyle}" SmallIcon="Close16.png"
                                      S izeMode="Normal"
                                      P adding="16,10"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>

