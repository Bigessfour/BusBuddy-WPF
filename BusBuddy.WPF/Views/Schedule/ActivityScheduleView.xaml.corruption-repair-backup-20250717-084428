<?xml v ersion="1.0" e ncoding="utf-8"?>
<UserControl x:Class="BusBuddy.WPF.Views.Schedule.ActivityScheduleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:BusBuddy.WPF.Views.Schedule"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
             xmlns:vm="clr-namespace:BusBuddy.WPF.ViewModels.ScheduleManagement"
             mc:I gnorable="d"
             d:D esignHeight="600" d:D esignWidth="800">

    <UserControl.Resources>
        <Style T argetType="Button" x:K ey="ActionButton">
            <Setter P roperty=" Margin" V alue="5,0,5,0"/>
            <Setter P roperty=" Padding" V alue="10,5"/>
            <Setter P roperty="MinWidth" V alue="80"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="*"/>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.R ow="0" T ext="Activity Schedule Management"
                   F ontSize="20" F ontWeight="Bold" M argin="10,10,10,20"/>

        <!-- Filters -->
        <Grid Grid.R ow="1" M argin="10,0,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition W idth="Auto"/>
                <ColumnDefinition W idth="*"/>
                <ColumnDefinition W idth="Auto"/>
                <ColumnDefinition W idth="*"/>
                <ColumnDefinition W idth="Auto"/>
                <ColumnDefinition W idth="*"/>
                <ColumnDefinition W idth="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.C olumn="0" T ext="Start Date:" V erticalAlignment="Center" M argin="0,0,5,0"/>
            <DatePicker Grid.C olumn="1" S electedDate="{Binding StartDate}" M argin="0,0,10,0"/>

            <TextBlock Grid.C olumn="2" T ext="End Date:" V erticalAlignment="Center" M argin="0,0,5,0"/>
            <DatePicker Grid.C olumn="3" S electedDate="{Binding EndDate}" M argin="0,0,10,0"/>

            <TextBlock Grid.C olumn="4" T ext="Trip Type:" V erticalAlignment="Center" M argin="0,0,5,0"/>
            <ComboBox Grid.C olumn="5" T ext="{Binding FilterTripType}" I sEditable="True" M argin="0,0,10,0">
                <ComboBoxItem C ontent=""/>
                <ComboBoxItem C ontent="Sports Trip"/>
                <ComboBoxItem C ontent="Activity Trip"/>
                <ComboBoxItem C ontent="Field Trip"/>
                <ComboBoxItem C ontent="Special Event"/>
            </ComboBox>

            <Button Grid.C olumn="6" C ontent="Apply Filters" C ommand="{Binding FilterCommand}"
                    S tyle="{StaticResource ActionButton}"/>
        </Grid>

        <!-- DataGrid -->
        <syncfusion:SfDataGrid Grid.R ow="2"
                               N ame="ActivityScheduleGrid"
                               I temsSource="{Binding ActivitySchedules}"
                               S electedItem="{Binding SelectedActivitySchedule, M ode=TwoWay}"
                               A utoGenerateColumns="False"
                               A llowFiltering="True"
                               A llowResizingColumns="True"
                               A llowSorting="True"
                               S howBusyIndicator="{Binding IsLoading}" Margin="10">
            <syncfusion:SfDataGrid.Columns>
                <syncfusion:GridTextColumn H eaderText="ID" M appingName="ActivityScheduleId" W idth="60"/>
                <syncfusion:GridDateTimeColumn H eaderText="Date" M appingName="ScheduledDate" W idth="110"
                                              D isplayBinding="{Binding ScheduledDate, S tringFormat=\{0:MM/dd/yyyy\}}"/>
                <syncfusion:GridTextColumn H eaderText="Trip Type" M appingName="TripType" W idth="120"/>
                <syncfusion:GridTextColumn H eaderText="Destination" M appingName="ScheduledDestination" W idth="200"/>
                <syncfusion:GridTextColumn H eaderText="Leave Time" M appingName="ScheduledLeaveTime" W idth="100"
                                          D isplayBinding="{Binding ScheduledLeaveTime, S tringFormat=\{0:hh\\:mm\}}"/>
                <syncfusion:GridTextColumn H eaderText="Event Time" M appingName="ScheduledEventTime" W idth="100"
                                          D isplayBinding="{Binding ScheduledEventTime, S tringFormat=\{0:hh\\:mm\}}"/>
                <syncfusion:GridTextColumn H eaderText="Driver" M appingName="ScheduledDriver.DriverName" W idth="150"/>
                <syncfusion:GridTextColumn H eaderText="Vehicle" M appingName="ScheduledVehicle.BusNumber" W idth="100"/>
                <syncfusion:GridTextColumn H eaderText="Requested By" M appingName="RequestedBy" W idth="130"/>
                <syncfusion:GridTextColumn H eaderText="Status" M appingName="Status" W idth="100"/>
                <syncfusion:GridNumericColumn H eaderText="Riders" M appingName="ScheduledRiders" W idth="70"/>
            </syncfusion:SfDataGrid.Columns>
        </syncfusion:SfDataGrid>

        <!-- Action Buttons -->
        <StackPanel Grid.R ow="3" O rientation="Horizontal" H orizontalAlignment="Center" M argin="10">
            <Button C ontent="Add" C ommand="{Binding AddActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Edit" C ommand="{Binding EditActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Delete" C ommand="{Binding DeleteActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Separator S tyle="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" M argin="5,0"/>
            <Button C ontent="Confirm" C ommand="{Binding ConfirmActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Cancel" C ommand="{Binding CancelActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Complete" C ommand="{Binding CompleteActivityScheduleCommand}" S tyle="{StaticResource ActionButton}"/>
            <Separator S tyle="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" M argin="5,0"/>
            <Button C ontent="Reports" C ommand="{Binding ShowReportsCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Export to CSV" C ommand="{Binding ExportToCsvCommand}" S tyle="{StaticResource ActionButton}"/>
            <Button C ontent="Refresh" C ommand="{Binding RefreshCommand}" S tyle="{StaticResource ActionButton}"/>
        </StackPanel>

        <!-- Status Bar -->
        <StatusBar Grid.R ow="4">
            <StatusBarItem>
                <TextBlock T ext="{Binding StatusMessage}"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</UserControl>

