<!--
╔══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                          ║
║                                              🔒 BUSBUDDY SYNCFUSION THEME COMPLIANCE REFERENCE 🔒                                                                    ║
║                                                                                                                                                                          ║
║  📋 REQUIRED STANDARDS: This child form MUST follow the universal standards defined in:                                                                                ║
║     - BusBuddy.WPF\Resources\SyncfusionFluentDarkTheme.xaml (Universal Control Standards)                                                                             ║
║     - Documentation\SyncfusionThemeImplementationGuide.md (Implementation Guide)                                                                                       ║
║                                                                                                                                                                          ║
║  🔧 MANDATORY IMPLEMENTATIONS:                                                                                                                                          ║
║     ✅ UserControl Style: BusBuddyUserControlStyle                                                                                                                     ║
║     ✅ Button Controls: Use syncfusion:ButtonAdv with Label property (NOT Content)                                                                                    ║
║     ✅ Data Grid: Use syncfusion:SfDataGrid with BusBuddySfDataGridStyle                                                                                              ║
║     ✅ Input Controls: Use Syncfusion equivalents (ComboBoxAdv, TextBoxExt, etc.)                                                                                     ║
║     ✅ Theme Application:on ALL Syncfusion controls                                                           ║
║     ✅ Color Palette: Use FluentDark brushes defined in SyncfusionFluentDarkTheme.xaml                                                                                ║
║                                                                                                                                                                          ║
║  ⚠️  CRITICAL REMINDERS:                                                                                                                                               ║
║     • NEVER use standard WPF Button - use syncfusion:ButtonAdv                                                                                                        ║
║     • NEVER use Content property on ButtonAdv - use Label property                                                                                                    ║
║     • NEVER use "sf:" namespace prefix - use "syncfusion:" prefix                                                                                                     ║
║     • ALWAYS apply FluentDark theme to maintain visual consistency                                                                                                     ║
║     • ALWAYS reference baseline styles for consistent appearance                                                                                                       ║
║                                                                                                                                                                          ║
║  📚 DEVELOPMENT REFERENCE: See Documentation\SyncfusionThemeImplementationGuide.md for copy-paste templates                                                          ║
║                                                                                                                                                                          ║
╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
-->

<UserControl x:Class="BusBuddy.WPF.Views.Schedule.ScheduleManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
             xmlns:viewModels="clr-namespace:BusBuddy.WPF.ViewModels.Schedule"
             xmlns:converters="clr-namespace:BusBuddy.WPF.Converters"
             mc:I gnorable="d"
             d:D esignHeight="600" d:D esignWidth="1000"
             d:D ataContext="{d:DesignInstance viewModels:ScheduleManagementViewModel}">

    <UserControl.Resources>
        <!-- BooleanToVisibilityConverter and ScheduleStatusToColorConverter are now global in App.xaml -->

        <!-- Schedule Status Templates -->
        <DataTemplate x:K ey="ScheduleStatusTemplate">
            <Border B ackground="{Binding Status, C onverter={StaticResource ScheduleStatusToColorConverter}}"
                    C ornerRadius="12" P adding="6,3" M argin="2">
                <TextBlock T ext="{Binding Status}"
                          F oreground="White"
                          F ontSize="10"
                          F ontWeight="SemiBold"
                          H orizontalAlignment="Center"/>
            </Border>
        </DataTemplate>

        <!-- Appointment Template for Custom Display -->
        <DataTemplate x:K ey="CustomAppointmentTemplate">
            <Border B ackground="{Binding AppointmentBackground}"
                    C ornerRadius="4"
                    P adding="4,2"
                    B orderBrush="White"
                    B orderThickness="1">
                <StackPanel>
                    <TextBlock T ext="{Binding Subject}"
                              F ontWeight="Bold"
                              F ontSize="11"
                              F oreground="White"
                              T extWrapping="Wrap"/>
                    <TextBlock T ext="{Binding StartTime, S tringFormat='{}{0:HH:mm}'}"
                              F ontSize="9"
                              F oreground="White"
                              O pacity="0.8"/>
                </StackPanel>
            </Border>
        </DataTemplate>
    </UserControl.Resources>

    <!-- Enhanced Schedule Management with Syncfusion DockingManager -->
    <syncfusion:DockingManager U seDocumentContainer="True"
                           P ersistState="False"
                           C ontainerMode="TDI"
                           S tyle="{StaticResource BusBuddyDockingManagerStyle}" Background="{DynamicResource ContentBackgroundBrush}">

        <!-- Calendar View (Document) -->
        <ContentControl syncfusion:DockingManager.H eader="Schedule Calendar"
                       syncfusion:DockingManager.S tate="Document"
                       syncfusion:DockingManager.C anSerialize="True">
            <Grid M argin="20">
                <Grid.RowDefinitions>
                    <RowDefinition H eight="Auto"/>
                    <RowDefinition H eight="*"/>
                </Grid.RowDefinitions>

                <!-- Enhanced Header with Calendar Controls -->
                <Grid Grid.R ow="0" M argin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition W idth="*"/>
                        <ColumnDefinition W idth="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.C olumn="0">
                        <TextBlock T ext="Schedule Management" F ontSize="22" F ontWeight="Bold" M argin="0,0,0,10"/>

                        <!-- Calendar Navigation and Filters -->
                        <StackPanel O rientation="Horizontal">
                            <syncfusion:ButtonAdv L abel="◀"
                                       C ommand="{Binding PreviousPeriodCommand}"
                                       S tyle="{StaticResource BusBuddyIconButtonStyle}" Width="32" H eight="32"
                                       M argin="0,0,5,0"/>
                            <syncfusion:ButtonAdv L abel="▶"
                                       C ommand="{Binding NextPeriodCommand}"
                                       S tyle="{StaticResource BusBuddyIconButtonStyle}" Width="32" H eight="32"
                                       M argin="0,0,10,0"/>
                            <syncfusion:ButtonAdv L abel="📅 Today"
                                       C ommand="{Binding GoToTodayCommand}"
                                       S tyle="{StaticResource BusBuddySecondaryButtonStyle}" Width="70" H eight="32"
                                       M argin="0,0,15,0"/>

                            <!-- View Type Selector -->
                            <syncfusion:ComboBoxAdv I temsSource="{Binding ViewTypes}"
                                            S electedItem="{Binding SelectedViewType}"
                                            D isplayMemberPath="Name"
                                            D efaultText="Select view..."
                                            S tyle="{StaticResource BusBuddyComboBoxAdvStyle}" Width="120" H eight="32"
                                            M argin="0,0,10,0"/>

                            <!-- Schedule Filters -->
                            <syncfusion:ComboBoxAdv I temsSource="{Binding ScheduleFilters}"
                                            S electedItem="{Binding SelectedScheduleFilter}"
                                            D isplayMemberPath="Name"
                                            D efaultText="Filter schedules..."
                                            S tyle="{StaticResource BusBuddyComboBoxAdvStyle}" Width="150" H eight="32"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Schedule Statistics -->
                    <StackPanel Grid.C olumn="1" O rientation="Horizontal">
                        <Border S tyle="{StaticResource BusBuddyDashboardTileStyle}" M argin="5,0">
                            <StackPanel>
                                <TextBlock T ext="Today's Schedules"
                                          S tyle="{StaticResource BusBuddyTileContentStyle}"/>
                                <TextBlock T ext="{Binding TodayScheduleCount}"
                                          S tyle="{StaticResource BusBuddyTileValueStyle}"
                                          F oreground="{DynamicResource SuccessBrush}"/>
                            </StackPanel>
                        </Border>
                        <Border S tyle="{StaticResource BusBuddyDashboardTileStyle}" M argin="5,0">
                            <StackPanel>
                                <TextBlock T ext="This Week"
                                          S tyle="{StaticResource BusBuddyTileContentStyle}"/>
                                <TextBlock T ext="{Binding WeekScheduleCount}"
                                          S tyle="{StaticResource BusBuddyTileValueStyle}"
                                          F oreground="{DynamicResource WarningBrush}"/>
                            </StackPanel>
                        </Border>
                        <Border S tyle="{StaticResource BusBuddyDashboardTileStyle}" M argin="5,0">
                            <StackPanel>
                                <TextBlock T ext="Conflicts"
                                          S tyle="{StaticResource BusBuddyTileContentStyle}"/>
                                <TextBlock T ext="{Binding ConflictCount}"
                                          S tyle="{StaticResource BusBuddyTileValueStyle}"
                                          F oreground="{DynamicResource ErrorBrush}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>

                <!-- Enhanced SfScheduler for Visual Schedule Management -->
                <syncfusion:SfScheduler Grid.R ow="1"
                                      I temsSource="{Binding ScheduleAppointments}"
                                      V iewType="{Binding SelectedSchedulerViewType}"
                                      S electedDate="{Binding SelectedDate, M ode=TwoWay}"
                                      R esourceCollection="{Binding BusResources}"
                                      R esourceGroupType="Resource"
                                      B orderThickness="1"
                                      B orderBrush="{DynamicResource BorderBrush}"
                                      B ackground="{DynamicResource ContentBackgroundBrush}"
                                      S tyle="{StaticResource BusBuddySfSchedulerStyle}">

                    <!-- Appointment Mapping for Custom Schedule Model -->
                    <syncfusion:SfScheduler.AppointmentMapping>
                        <syncfusion:AppointmentMapping S tartTime="StartTime"
                                                      E ndTime="EndTime"
                                                      S ubject="Subject"
                                                      Id="Id"
                                                      A ppointmentBackground="AppointmentBackground"
                                                      N otes="Notes"
                                                      I sAllDay="IsAllDay" />
                    </syncfusion:SfScheduler.AppointmentMapping>

                    <!-- Resource Mapping Configuration -->
                    <syncfusion:SfScheduler.ResourceMapping>
                        <syncfusion:ResourceMapping N ame="Name"
                                                   Id="Id"
                                                   B ackground=" Background"
                                                   F oreground=" Foreground" />
                    </syncfusion:SfScheduler.ResourceMapping>

                    <!-- Resource Header Template -->
                    <syncfusion:SfScheduler.ResourceHeaderTemplate>
                        <DataTemplate>
                            <Border B ackground="{DynamicResource SurfaceBackgroundBrush}"
                                  B orderBrush="{DynamicResource BorderBrush}"
                                  B orderThickness="0,0,1,1"
                                  P adding="8,4">
                                <StackPanel>
                                    <TextBlock T ext="{Binding Name}"
                                             F ontWeight="Bold"
                                             F ontSize="12"
                                             F oreground="{DynamicResource PrimaryForegroundBrush}"/>
                                    <TextBlock T ext="{Binding Id, S tringFormat='ID: {0}'}"
                                             F ontSize="10"
                                             F oreground="{DynamicResource SecondaryForegroundBrush}"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </syncfusion:SfScheduler.ResourceHeaderTemplate>

                    <!-- Context Menu for Appointments -->
                    <syncfusion:SfScheduler.ContextMenu>
                        <ContextMenu S tyle="{StaticResource BusBuddyContextMenuStyle}">
                            <MenuItem H eader="View Details" C ommand="{Binding ViewScheduleDetailsCommand}"/>
                            <MenuItem H eader="Edit Schedule" C ommand="{Binding EditScheduleCommand}"/>
                            <Separator/>
                            <MenuItem H eader="Duplicate Schedule" C ommand="{Binding DuplicateScheduleCommand}"/>
                            <MenuItem H eader="Reschedule" C ommand="{Binding RescheduleCommand}"/>
                            <Separator/>
                            <MenuItem H eader="Mark as Complete" C ommand="{Binding MarkCompleteCommand}"/>
                            <MenuItem H eader="Cancel Schedule" C ommand="{Binding CancelScheduleCommand}"
                                     F oreground="{DynamicResource ErrorBrush}"/>
                            <Separator/>
                            <MenuItem H eader="Add to Route" C ommand="{Binding AddToRouteCommand}"/>
                        </ContextMenu>
                    </syncfusion:SfScheduler.ContextMenu>
                </syncfusion:SfScheduler>
            </Grid>
        </ContentControl>

        <!-- Schedule List View (Docked Right) -->
        <ContentControl syncfusion:DockingManager.H eader="Schedule List"
                       syncfusion:DockingManager.S tate="Dock"
                       syncfusion:DockingManager.S ideInDockedMode="Right"
                       syncfusion:DockingManager.D esiredWidthInDockedMode="400"
                       syncfusion:DockingManager.C anSerialize="True">
            <Grid M argin="15">
                <Grid.RowDefinitions>
                    <RowDefinition H eight="Auto"/>
                    <RowDefinition H eight="*"/>
                    <RowDefinition H eight="Auto"/>
                </Grid.RowDefinitions>

                <!-- List Header -->
                <StackPanel Grid.R ow="0" M argin="0,0,0,15">
                    <TextBlock T ext="Schedule Management"
                             F ontSize="16"
                             F ontWeight="Bold"
                             M argin="0,0,0,10"
                             F oreground="{DynamicResource PrimaryForegroundBrush}"/>

                    <!-- Quick Actions -->
                    <StackPanel O rientation="Horizontal">
                        <syncfusion:ButtonAdv L abel="➕ New"
                                   C ommand="{Binding AddScheduleCommand}"
                                   S tyle="{StaticResource BusBuddyPrimaryButtonStyle}" Width="60" H eight="32"
                                   M argin="0,0,8,0"/>
                        <syncfusion:DropDownButtonAdv W idth="80"
                                              H eight="32"
                                              S tyle="{StaticResource BusBuddyDropDownButtonStyle}">
                            <syncfusion:DropDownMenuGroup>
                                <syncfusion:DropDownMenuItem H eader="Daily Schedule Report"
                                                            C ommand="{Binding GenerateDailyReportCommand}"/>
                                <syncfusion:DropDownMenuItem H eader="Weekly Summary"
                                                            C ommand="{Binding GenerateWeeklyReportCommand}"/>
                                <syncfusion:DropDownMenuItem H eader="Resource Utilization"
                                                            C ommand="{Binding GenerateUtilizationReportCommand}"/>
                                <Separator/>
                                <syncfusion:DropDownMenuItem H eader="Export to Excel"
                                                            C ommand="{Binding ExportScheduleCommand}"/>
                            </syncfusion:DropDownMenuGroup>
                        </syncfusion:DropDownButtonAdv>
                    </StackPanel>
                </StackPanel>

                <!-- Enhanced Schedule Data Grid -->
                <syncfusion:SfDataGrid Grid.R ow="1"
                               I temsSource="{Binding Schedules}"
                               S electedItem="{Binding SelectedSchedule, M ode=TwoWay}"
                               A utoGenerateColumns="False"
                               A llowResizingColumns="True"
                               A llowSorting="True"
                               A llowFiltering="True"
                               A llowGrouping="True"
                               S howGroupDropArea="False"
                               C olumnSizer="Star"
                               S electionMode="Single"
                               N avigationMode="Row"
                               A llowEditing="True"
                               S howRowHeader="False"
                               B orderThickness="1"
                               B orderBrush="{StaticResource BorderBrush}"
                               S tyle="{StaticResource BusBuddySfDataGridStyle}" Background="{StaticResource ContentBackground}"
                               F oreground="{StaticResource Foreground}"
                               G ridLinesVisibility="Both">

                    <syncfusion:SfDataGrid.Columns>
                        <!-- Schedule ID (Hidden/Collapsed) -->
                        <syncfusion:GridTextColumn M appingName="ScheduleId" H eaderText="ID" W idth="0" I sHidden="True"/>

                        <!-- Destination -->
                        <syncfusion:GridTextColumn M appingName="Destination" H eaderText="Destination" W idth="140"/>

                        <!-- Schedule Date and Time -->
                        <syncfusion:GridDateTimeColumn M appingName="ScheduleDate" H eaderText="Date" W idth="100" P attern="ShortDate"/>
                        <syncfusion:GridTimeSpanColumn M appingName="LeaveTime" H eaderText="Departure" W idth="80"/>
                        <syncfusion:GridTimeSpanColumn M appingName="EventTime" H eaderText="Arrival" W idth="80"/>

                        <!-- Bus Assignment with Enhanced Display -->
                        <syncfusion:GridTemplateColumn M appingName="BusAssignment" H eaderText="Bus" W idth="100">
                            <syncfusion:GridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border B ackground="{StaticResource AccentBrush}"
                                          C ornerRadius="4"
                                          P adding="4,2"
                                          M argin="1">
                                        <TextBlock T ext="{Binding BusNumber, S tringFormat='Bus {0}'}"
                                                  F ontSize="10"
                                                  F ontWeight="SemiBold"
                                                  F oreground="{StaticResource ContentBackground}"
                                                  H orizontalAlignment="Center"/>
                                    </Border>
                                </DataTemplate>
                            </syncfusion:GridTemplateColumn.CellTemplate>
                        </syncfusion:GridTemplateColumn>

                        <!-- Driver Assignment -->
                        <syncfusion:GridTemplateColumn M appingName="DriverAssignment" H eaderText="Driver" W idth="120">
                            <syncfusion:GridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border B ackground="{StaticResource SecondaryBrush}"
                                          C ornerRadius="4"
                                          P adding="4,2"
                                          M argin="1">
                                        <TextBlock T ext="{Binding DriverName}"
                                                  F ontSize="10"
                                                  F ontWeight="SemiBold"
                                                  F oreground="{StaticResource ContentBackground}"
                                                  H orizontalAlignment="Center"
                                                  T extTrimming="CharacterEllipsis"/>
                                    </Border>
                                </DataTemplate>
                            </syncfusion:GridTemplateColumn.CellTemplate>
                        </syncfusion:GridTemplateColumn>

                        <!-- Status with Visual Indicator -->
                        <syncfusion:GridTemplateColumn M appingName="Status" H eaderText="Status" W idth="80">
                            <syncfusion:GridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ContentPresenter C ontent="{Binding}" C ontentTemplate="{StaticResource ScheduleStatusTemplate}"/>
                                </DataTemplate>
                            </syncfusion:GridTemplateColumn.CellTemplate>
                        </syncfusion:GridTemplateColumn>
                    </syncfusion:SfDataGrid.Columns>

                    <!-- Context Menu -->
                    <syncfusion:SfDataGrid.ContextMenu>
                        <ContextMenu S tyle="{StaticResource BusBuddyContextMenuStyle}">
                            <MenuItem H eader="View Details" C ommand="{Binding ViewScheduleDetailsCommand}"/>
                            <MenuItem H eader="Edit Schedule" C ommand="{Binding EditScheduleCommand}"/>
                            <Separator/>
                            <MenuItem H eader="Duplicate" C ommand="{Binding DuplicateScheduleCommand}"/>
                            <MenuItem H eader="Reschedule" C ommand="{Binding RescheduleCommand}"/>
                            <Separator/>
                            <MenuItem H eader="Mark as Complete" C ommand="{Binding MarkCompleteCommand}"/>
                            <MenuItem H eader="Cancel Schedule"
                                     C ommand="{Binding CancelScheduleCommand}"
                                     F oreground="{StaticResource ErrorBrush}"/>
                            <Separator/>
                            <MenuItem H eader="Generate Report" C ommand="{Binding GenerateScheduleReportCommand}"/>
                        </ContextMenu>
                    </syncfusion:SfDataGrid.ContextMenu>
                </syncfusion:SfDataGrid>

                <!-- Action Panel -->
                <Grid Grid.R ow="2" M argin="0,15,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition H eight="Auto"/>
                        <RowDefinition H eight="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Schedule Summary -->
                    <TextBlock Grid.R ow="0"
                             M argin="0,0,0,10"
                             F oreground="{StaticResource PrimaryForeground}">
                        <Run T ext="Showing"/>
                        <Run T ext="{Binding Schedules.Count, M ode=OneWay}" F ontWeight="Bold"/>
                        <Run T ext="of"/>
                        <Run T ext="{Binding TotalSchedules, M ode=OneWay}" F ontWeight="Bold"/>
                        <Run T ext="schedules"/>
                    </TextBlock>

                    <!-- Action Buttons -->
                    <StackPanel Grid.R ow="1" O rientation="Vertical">
                        <syncfusion:ButtonAdv L abel="✏️ Edit Selected"
                                   C ommand="{Binding UpdateScheduleCommand}"
                                   C ommandParameter="{Binding SelectedSchedule}"
                                   S tyle="{StaticResource BusBuddySecondaryButtonStyle}" Height="32" M argin="0,0,0,5"/>
                        <syncfusion:ButtonAdv L abel="🗑️ Delete Selected"
                                   C ommand="{Binding DeleteScheduleCommand}"
                                   C ommandParameter="{Binding SelectedSchedule}"
                                   S tyle="{StaticResource BusBuddyDangerButtonStyle}" Height="32" M argin="0,0,0,5"/>
                        <syncfusion:ButtonAdv L abel="🔄 Refresh Data"
                                   C ommand="{Binding LoadSchedulesCommand}"
                                   S tyle="{StaticResource BusBuddyPrimaryButtonStyle}" Height="32"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </ContentControl>

        <!-- Schedule Analytics (Document Tab) -->
        <ContentControl syncfusion:DockingManager.H eader="Schedule Analytics"
                       syncfusion:DockingManager.S tate="Document"
                       syncfusion:DockingManager.C anSerialize="True">
            <Grid M argin="15">
                <Grid.RowDefinitions>
                    <RowDefinition H eight="Auto"/>
                    <RowDefinition H eight="300"/>
                    <RowDefinition H eight="*"/>
                </Grid.RowDefinitions>

                <!-- Analytics Header -->
                <TextBlock Grid.R ow="0"
                          T ext="Schedule Performance Analytics"
                          F ontSize="18"
                          F ontWeight="Bold"
                          M argin="0,0,0,15"
                          F oreground="{StaticResource PrimaryForeground}"/>

                <!-- Analytics Charts -->
                <Grid Grid.R ow="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition W idth="*"/>
                        <ColumnDefinition W idth="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Schedule Volume Chart -->
                    <Border Grid.C olumn="0"
                           B orderBrush="{StaticResource BorderBrush}"
                           B orderThickness="1"
                           C ornerRadius="6"
                           M argin="0,0,10,0">
                        <syncfusion:SfChart H eader="Daily Schedule Volume"
                                         M argin="15"
                                         S tyle="{StaticResource BusBuddySfChartStyle}" Background="{StaticResource ContentBackground}">
                            <syncfusion:SfChart.PrimaryAxis>
                                <syncfusion:DateTimeAxis H eader="Date"/>
                            </syncfusion:SfChart.PrimaryAxis>
                            <syncfusion:SfChart.SecondaryAxis>
                                <syncfusion:NumericalAxis H eader="Schedule Count"/>
                            </syncfusion:SfChart.SecondaryAxis>
                            <syncfusion:LineSeries I temsSource="{Binding ScheduleVolumeData}"
                                                 X BindingPath="Date"
                                                 Y BindingPath="Count"
                                                 I nterior="{StaticResource AccentBrush}"/>
                        </syncfusion:SfChart>
                    </Border>

                    <!-- Resource Utilization Chart -->
                    <Border Grid.C olumn="1"
                           B orderBrush="{StaticResource BorderBrush}"
                           B orderThickness="1"
                           C ornerRadius="6"
                           M argin="10,0,0,0">
                        <syncfusion:SfChart H eader="Resource Utilization"
                                         M argin="15"
                                         S tyle="{StaticResource BusBuddySfChartStyle}" Background="{StaticResource ContentBackground}">
                            <syncfusion:PieSeries I temsSource="{Binding ResourceUtilizationData}"
                                                X BindingPath="ResourceType"
                                                Y BindingPath="UtilizationPercentage"
                                                E xplodeIndex="0"
                                                E xplodeRadius="10"/>
                        </syncfusion:SfChart>
                    </Border>
                </Grid>

                <!-- Detailed Analytics Grid -->
                <syncfusion:SfDataGrid Grid.R ow="2"
                                    M argin="0,15,0,0"
                                    I temsSource="{Binding ScheduleAnalyticsData}"
                                    A utoGenerateColumns="False"
                                    A llowSorting="True"
                                    A llowFiltering="True"
                                    S howRowHeader="False"
                                    S tyle="{StaticResource BusBuddySfDataGridStyle}" Background="{StaticResource ContentBackground}"
                                    F oreground="{StaticResource Foreground}"
                                    B orderBrush="{StaticResource BorderBrush}">
                    <syncfusion:SfDataGrid.Columns>
                        <syncfusion:GridDateTimeColumn M appingName="Date" H eaderText="Date" W idth="100" P attern="ShortDate"/>
                        <syncfusion:GridNumericColumn M appingName="TotalSchedules" H eaderText="Total Schedules" W idth="120"/>
                        <syncfusion:GridNumericColumn M appingName="CompletedSchedules" H eaderText="Completed" W idth="100"/>
                        <syncfusion:GridNumericColumn M appingName="CancelledSchedules" H eaderText="Cancelled" W idth="100"/>
                        <syncfusion:GridNumericColumn M appingName="BusUtilization" H eaderText="Bus Utilization %" W idth="130"/>
                        <syncfusion:GridNumericColumn M appingName="DriverUtilization" H eaderText="Driver Utilization %" W idth="140"/>
                        <syncfusion:GridNumericColumn M appingName="EfficiencyScore" H eaderText="Efficiency %" W idth="100"/>
                    </syncfusion:SfDataGrid.Columns>
                </syncfusion:SfDataGrid>
            </Grid>
        </ContentControl>

        <!-- Loading Indicator -->
        <Border syncfusion:DockingManager.C anSerialize="False"
                B ackground="#80000000"
                V isibility="{Binding IsBusy, C onverter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel V erticalAlignment="Center" H orizontalAlignment="Center">
                <syncfusion:SfBusyIndicator I sBusy="True"
                                         S tyle="{StaticResource BusBuddySfBusyIndicatorStyle}" Width="60"
                                         H eight="60"/>
                <TextBlock T ext="Loading schedule data..."
                           F oreground="White"
                           F ontSize="16"
                           M argin="0,15,0,0"
                           H orizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </syncfusion:DockingManager>
</UserControl>

