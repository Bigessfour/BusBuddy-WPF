<UserControl x:Class="BusBuddy.WPF.Views.Bus.BusManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
             xmlns:viewModels="clr-namespace:BusBuddy.WPF.ViewModels"
             mc:I gnorable="d"
             d:D esignHeight="450" d:D esignWidth="800"
             d:D ataContext="{d:DesignInstance viewModels:BusManagementViewModel}">
    <!-- Local resources removed - all converters now global in App.xaml -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition H eight="Auto"/>
            <RowDefinition H eight="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.R ow="0" S tyle="{StaticResource BusBuddyFormHeaderStyle}">
            <TextBlock T ext="🚌 Bus Management"
                       S tyle="{StaticResource BusBuddyTileHeaderStyle}"/>
        </Border>

        <!-- Content -->
        <Grid Grid.R ow="1" S tyle="{StaticResource BusBuddyFormContentStyle}">
            <Grid.RowDefinitions>
                <RowDefinition H eight="*" />
                <RowDefinition H eight="Auto" />
                <RowDefinition H eight="Auto" />
            </Grid.RowDefinitions>

            <!-- Main Grid -->
            <syncfusion:SfDataGrid Grid.R ow="0"
                           I temsSource="{Binding Buses}"
                           S electedItem="{Binding SelectedBus, M ode=TwoWay}"
                           S tyle="{StaticResource BusBuddySfDataGridStyle}" AutoGenerateColumns="False"
                           A llowResizingColumns="True"
                           A llowSorting="True"
                           A llowFiltering="True"
                           C olumnSizer="Star"
                           S electionMode="Single"
                           S electionUnit="Row"
                           N avigationMode="Row"
                           A llowEditing="False"
                           S howRowHeader="True"
                           E nableDataVirtualization="True"
                           H orizontalAlignment="Stretch"
                           V erticalAlignment="Stretch"
                           R owHeight="40"
                           H eaderRowHeight="45"
                           S electionChanged="DataGrid_SelectionChanged">
            <syncfusion:SfDataGrid.Columns>
                <syncfusion:GridTextColumn M appingName="BusNumber" H eaderText="Bus Number" W idth="120" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="Year" H eaderText="Year" W idth="80" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="Make" H eaderText="Make" W idth="120" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="Model" H eaderText="Model" W idth="120" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="SeatingCapacity" H eaderText="Capacity" W idth="80" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="Status" H eaderText="Status" W idth="100" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridDateTimeColumn M appingName="DateLastInspection" H eaderText="Last Inspection" W idth="140"
                                       P attern="ShortDate" A llowSorting="True">
                    <syncfusion:GridDateTimeColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridDateTimeColumn.HeaderStyle>
                </syncfusion:GridDateTimeColumn>
                <syncfusion:GridTextColumn M appingName="InspectionStatus" H eaderText="Inspection Status" W idth="120" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
                <syncfusion:GridTextColumn M appingName="CurrentOdometer" H eaderText="Odometer" W idth="100" A llowSorting="True">
                    <syncfusion:GridTextColumn.HeaderStyle>
                        <Style T argetType="syncfusion:GridHeaderCellControl">
                            <EventSetter E vent="MouseLeftButtonUp" H andler="OnHeaderClick"/>
                        </Style>
                    </syncfusion:GridTextColumn.HeaderStyle>
                </syncfusion:GridTextColumn>
            </syncfusion:SfDataGrid.Columns>
        </syncfusion:SfDataGrid>

        <!-- Pagination Controls -->
        <Grid Grid.R ow="2" M argin="0,10,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition W idth="Auto"/>
                <ColumnDefinition W idth="*"/>
                <ColumnDefinition W idth="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Records Info -->
            <TextBlock Grid.C olumn="0" V erticalAlignment="Center" F oreground="{DynamicResource SecondaryForeground}">
                <Run T ext="Showing "/>
                <Run T ext="{Binding Buses.Count, M ode=OneWay}" F oreground="{DynamicResource ContentForeground}" F ontWeight="SemiBold"/>
                <Run T ext=" of "/>
                <Run T ext="{Binding TotalRecords, M ode=OneWay}" F oreground="{DynamicResource ContentForeground}" F ontWeight="SemiBold"/>
                <Run T ext=" records"/>
            </TextBlock>

            <!-- Page Navigation -->
            <StackPanel Grid.C olumn="2" O rientation="Horizontal" H orizontalAlignment="Right">
                <syncfusion:ButtonAdv C ommand="{Binding FirstPageCommand}"
                        L abel="&#xE892;"
                        F ontFamily="Segoe MDL2 Assets"
                        W idth="40" H eight="30"
                        M argin="2,0"
                        S tyle="{StaticResource BusBuddyIconButtonStyle}"
                        T oolTip="First Page"/>
                <syncfusion:ButtonAdv C ommand="{Binding PreviousPageCommand}"
                        L abel="&#xE76B;"
                        F ontFamily="Segoe MDL2 Assets"
                        W idth="40" H eight="30"
                        M argin="2,0"
                        S tyle="{StaticResource BusBuddyIconButtonStyle}"
                        T oolTip="Previous Page"/>

                <!-- Page Number Display -->
                <Border B orderBrush="{DynamicResource ContentBorder}"
                        B orderThickness="1"
                        B ackground="{DynamicResource SurfaceBackground}"
                        M argin="5,0"
                        P adding="8,0"
                        V erticalAlignment="Center"
                        C ornerRadius="3">
                    <StackPanel O rientation="Horizontal">
                        <TextBlock T ext="Page " V erticalAlignment="Center" F oreground="{DynamicResource SecondaryForeground}"/>
                        <TextBlock T ext="{Binding CurrentPage, M ode=OneWay}" V erticalAlignment="Center" F oreground="{DynamicResource ContentForeground}" F ontWeight="SemiBold"/>
                        <TextBlock T ext=" of " V erticalAlignment="Center" F oreground="{DynamicResource SecondaryForeground}"/>
                        <TextBlock T ext="{Binding TotalPages, M ode=OneWay}" V erticalAlignment="Center" F oreground="{DynamicResource ContentForeground}" F ontWeight="SemiBold"/>
                    </StackPanel>
                </Border>

                <syncfusion:ButtonAdv C ommand="{Binding NextPageCommand}"
                        L abel="&#xE76C;"
                        F ontFamily="Segoe MDL2 Assets"
                        W idth="40" H eight="30"
                        M argin="2,0"
                        S tyle="{StaticResource BusBuddyIconButtonStyle}"
                        T oolTip="Next Page"/>
                <syncfusion:ButtonAdv C ommand="{Binding LastPageCommand}"
                        L abel="&#xE893;"
                        F ontFamily="Segoe MDL2 Assets"
                        W idth="40" H eight="30"
                        M argin="2,0"
                        S tyle="{StaticResource BusBuddyIconButtonStyle}"
                        T oolTip="Last Page"/>

                <!-- Page Size Selector -->
                <StackPanel O rientation="Horizontal" V erticalAlignment="Center" M argin="20,0,0,0">
                    <TextBlock T ext="Show " V erticalAlignment="Center" M argin="0,0,5,0" F oreground="{DynamicResource SecondaryForeground}"/>
                    <syncfusion:ComboBoxAdv W idth="65" H eight="30"
                              S electedValue="{Binding PageSize, M ode=TwoWay}"
                              S tyle="{StaticResource BusBuddyComboBoxAdvStyle}" SelectionChanged="PageSize_SelectionChanged">
                        <syncfusion:ComboBoxItemAdv C ontent="10"/>
                        <syncfusion:ComboBoxItemAdv C ontent="20"/>
                        <syncfusion:ComboBoxItemAdv C ontent="50"/>
                        <syncfusion:ComboBoxItemAdv C ontent="100"/>
                    </syncfusion:ComboBoxAdv>
                    <TextBlock T ext="per page" V erticalAlignment="Center" M argin="5,0,0,0" F oreground="{DynamicResource SecondaryForeground}"/>
                </StackPanel>
            </StackPanel>
        </Grid>

            <!-- Action Buttons Panel -->
            <StackPanel Grid.R ow="2" O rientation="Horizontal" H orizontalAlignment="Right" M argin="0,15,0,0">
                <syncfusion:ButtonAdv L abel="➕ Add New Bus"
                                C ommand="{Binding AddBusCommand}"
                                M argin="5"
                                S tyle="{StaticResource BusBuddyPrimaryButtonAdvStyle}" ToolTip="Add a new bus to the fleet"/>
                <syncfusion:ButtonAdv L abel="✏️ Edit Selected"
                                C ommand="{Binding UpdateBusCommand}"
                                M argin="5"
                                S tyle="{StaticResource BusBuddySecondaryButtonAdvStyle}" ToolTip="Edit the currently selected bus"/>
                <syncfusion:ButtonAdv L abel="🗑️ Delete"
                                C ommand="{Binding DeleteBusCommand}"
                                M argin="5"
                                S tyle="{StaticResource BusBuddyButtonAdvStyle}" ToolTip="Delete the currently selected bus"/>
            </StackPanel>
        </Grid>

        <!-- Loading Indicator -->
        <syncfusion:SfBusyIndicator Grid.R ow="0" Grid.R owSpan="2"
                                    I sBusy="{Binding IsBusy}"
                                    S tyle="{StaticResource BusBuddySfBusyIndicatorStyle}" AnimationType="DoubleCircle"
                                    B ackground="Transparent"/>
    </Grid>
</UserControl>

