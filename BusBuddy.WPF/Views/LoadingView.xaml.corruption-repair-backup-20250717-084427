<!--
╔══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                            🚀 BUSBUDDY PREMIUM LOADING EXPERIENCE 🚀                                                                                ║
║                                                [ENHANCED LOADING VIEW]                                                                                                ║
║  ✨ PREMIUM SYNCFUSION DESIGN: Advanced Syncfusion controls with FluentDark theme                                                                                     ║
║  🎯 DIRECT THEME BRUSHES: Uses explicit FluentDark colors to prevent white screen                                                                                    ║
║  🎭 MODERN ANIMATIONS: Storyboard animations with Syncfusion premium controls                                                                                        ║
║  🏗️ DEPTH & SHADOWS: Layered design with modern visual depth effects                                                                                                 ║
╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
-->

<UserControl x:Class="BusBuddy.WPF.Views.LoadingView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;a ssembly=Syncfusion.SfSkinManager.WPF"
             xmlns:converters="clr-namespace:BusBuddy.WPF.Converters">

    <UserControl.Resources>
        <!-- CONVERTERS -->
        <!-- BooleanToVisibilityInverseConverter is now global in App.xaml -->

        <!-- PREMIUM LOADING ANIMATIONS -->
        <Storyboard x:K ey="FadeInAnimation" R epeatBehavior="Forever">
            <DoubleAnimation Storyboard.T argetName="LoadingContainer"
                           Storyboard.T argetProperty="Opacity"
                           F rom="0.7" To="1.0" D uration="0:0:2"
                           A utoReverse="True"/>
        </Storyboard>

        <Storyboard x:K ey="PulseAnimation" R epeatBehavior="Forever">
            <DoubleAnimation Storyboard.T argetName="GlowEllipse"
                           Storyboard.T argetProperty="Opacity"
                           F rom="0.2" To="0.8" D uration="0:0:1.5"
                           A utoReverse="True"/>
        </Storyboard>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger R outedEvent=" Loaded">
            <BeginStoryboard S toryboard="{StaticResource FadeInAnimation}"/>
            <BeginStoryboard S toryboard="{StaticResource PulseAnimation}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <!-- MAIN LOADING EXPERIENCE -->
    <Grid B ackground="{DynamicResource SurfaceBackground}">
        <!-- BACKGROUND GLOW EFFECT -->
        <Ellipse x:N ame="GlowEllipse"
                 W idth="800" H eight="800"
                 F ill="{DynamicResource AccentBackground}"
                 H orizontalAlignment="Center"
                 V erticalAlignment="Center"
                 O pacity="0.3"/>

        <!-- PREMIUM LOADING CONTAINER -->
        <Border x:N ame="LoadingContainer"
                B ackground="{DynamicResource ContentBackground}"
                C ornerRadius="20"
                P adding="60,50"
                H orizontalAlignment="Center"
                V erticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect C olor="Black" D irection="270" S hadowDepth="10"
                                B lurRadius="30" O pacity="0.5"/>
            </Border.Effect>

            <StackPanel>
                <!-- PREMIUM APP BRANDING -->
                <StackPanel O rientation="Horizontal" H orizontalAlignment="Center" M argin="0,0,0,40">
                    <!-- ICON PLACEHOLDER - Could add custom icon here -->
                    <Border B ackground="{DynamicResource PrimaryBackground}"
                            C ornerRadius="8" W idth="48" H eight="48" M argin="0,0,15,0">
                        <TextBlock T ext="🚌" F ontSize="24" H orizontalAlignment="Center"
                                   V erticalAlignment="Center"/>
                    </Border>

                    <!-- APP TITLE WITH PREMIUM TYPOGRAPHY -->
                    <StackPanel>
                        <TextBlock T ext="BUS BUDDY"
                                   F ontSize="42" F ontWeight="Bold"
                                   F oreground="{DynamicResource ContentForeground}"
                                   F ontFamily="Segoe UI Light"/>
                        <TextBlock T ext="School Transportation Management"
                                   F ontSize="14" F ontWeight="Normal"
                                   F oreground="{DynamicResource ContentForeground}"
                                   F ontFamily="Segoe UI"
                                   H orizontalAlignment="Center"
                                   M argin="0,5,0,0"/>
                    </StackPanel>
                </StackPanel>

                <!-- SYNCFUSION PREMIUM LOADING INDICATORS -->

                <!-- PRIMARY LOADING ANIMATION -->
                <syncfusion:SfBusyIndicator I sBusy="True"
                                           A nimationType="Gear"
                                           H eight="100" W idth="100"
                                           F oreground="{DynamicResource PrimaryBackground}"
                                           M argin="0,0,0,30"
                                           S tyle="{StaticResource LoadingIndicatorStyle}"/>

                <!-- ADVANCED PROGRESS BAR -->
                <StackPanel M argin="0,0,0,25">
                    <TextBlock T ext="{Binding Status}"
                               F ontSize="16" F ontWeight="Medium"
                               F oreground="{DynamicResource ContentForeground}"
                               H orizontalAlignment="Center"
                               M argin="0,0,0,15"/>

                    <syncfusion:SfLinearProgressBar W idth="400" H eight="8"
                                             P rogress="{Binding ProgressPercentage}"
                                             F oreground="{DynamicResource PrimaryBackground}"
                                             B ackground="{DynamicResource ContentBackground}"
                                             S tyle="{StaticResource StandardLinearProgressBarStyle}" IsIndeterminate="{Binding IsIndeterminate}"/>

                    <!-- Progress Percentage Display -->
                    <TextBlock T ext="{Binding ProgressPercentage, S tringFormat='{}{0}%'}"
                               F ontSize="12" F ontWeight="SemiBold"
                               F oreground="{DynamicResource AccentBackground}"
                               H orizontalAlignment="Center"
                               M argin="0,8,0,0"
                               V isibility="{Binding IsIndeterminate, C onverter={StaticResource BooleanToVisibilityInverseConverter}}"/>
                </StackPanel>

                <!-- SECONDARY PROGRESS INDICATOR -->
                <syncfusion:SfLinearProgressBar I sIndeterminate="True"
                                               W idth="320" H eight="3"
                                               F oreground="{DynamicResource AccentBackground}"
                                               B ackground="{DynamicResource ContentBackground}"
                                               M argin="0,0,0,25"
                                               S tyle="{StaticResource StandardLinearProgressBarStyle}"/>

                <!-- STATUS INFORMATION -->
                <StackPanel>
                    <TextBlock T ext="Loading Dashboard..."
                               F ontSize="14"
                               F oreground="{DynamicResource ContentForeground}"
                               H orizontalAlignment="Center"
                               F ontFamily="Segoe UI"
                               M argin="0,0,0,8"/>

                    <TextBlock T ext="Please wait while we prepare your experience"
                               F ontSize="12"
                               F oreground="{DynamicResource ContentForeground}"
                               H orizontalAlignment="Center"
                               F ontFamily="Segoe UI"
                               O pacity="0.7"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>

